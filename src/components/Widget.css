/* Optimizaciones de rendimiento críticas */
.interactive-widget {
    /* CRÍTICO: Forzar hardware acceleration */
    transform: translate3d(0, 0, 0);
    will-change: transform;
    backface-visibility: hidden;

    border: 1px solid transparent;
    
    /* CORREGIDO: Solo style containment para permitir overflow de indicators */
    contain: style;
    
    /* Eliminar transiciones para evitar pestañeo */
    transition: none !important;
    
    /* Position relative para elementos absolute */
    position: relative;
    
    /* Transform origin centrado para rotaciones */
    transform-origin: center center;
    
    /* CSS custom property para rotación */
    --widget-rotation: 0deg;
}

/* Estado durante el arrastre - OPTIMIZADO */
.interactive-widget.dragging {
    /* Hardware acceleration durante drag manteniendo rotación */
    transform: translate3d(var(--drag-x, 0), var(--drag-y, 0), 0) rotate(var(--widget-rotation));
    transition: none !important;
    
    /* Containment más fuerte durante drag */
    contain: layout style paint;
    
    /* Optimizar eventos durante drag */
    pointer-events: none;
    box-shadow: none; /* Eliminar sombra para evitar renderizado pesado */
}

/* Restaurar pointer-events para contenido */
.interactive-widget.dragging .widget-content {
    pointer-events: auto;
}

/* Hover states restaurados */
.interactive-widget:hover:not(.dragging):not(.widget-editing) {
  border: 1px solid #FF6010;
}

/* Modo edición */
.widget-editing {
    outline: 1px dashed #FF6010 !important;
    outline-offset: 1px;
    z-index: 1000 !important;
    cursor: text !important;
    background-color: #ffffff23;
}

.widget-editing .drag-handle {
    cursor: text !important;
}

/* Ocultar elementos en modo edición */
.widget-editing .resize-handle {
    display: none !important;
}

.widget-selected {
  border: 1px solid #FF6010;
}

/* Estilos específicos para widgets de formas */
.widget[data-type="rectangle"],
.widget[data-type="circle"],
.widget[data-type="diamond"] {
    /* Asegurar que las formas se vean correctamente */
    overflow: visible;
    padding: 0;
}

